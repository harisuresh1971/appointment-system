{% extends "base.html" %}
{% block title %}Appointments{% endblock %}
{% block content %}
<h1 class="text-2xl font-semibold text-gray-800 mb-6">Appointments</h1>
<div class="card">
  <div class="flex justify-between items-center mb-4">
    <span class="text-gray-600">Sorted by date and time</span>
    <a href="/appointments/new" class="btn-primary">New Appointment</a>
  </div>
  {% if appointments %}
  <ul class="divide-y divide-gray-200">
    {% for a in appointments %}
    <li class="py-4 flex justify-between items-center">
      <div>
        <span class="font-medium text-gray-800">{{ a.customer.name }}</span>
        <span class="text-gray-500 text-sm ml-2">{{ a.date }} {{ a.time.strftime("%H:%M") }}</span>
        <span class="text-sm ml-2 {{ 'text-green-600' if a.status == 'Completed' else 'text-amber-600' }}">{{ a.status }}</span>
        {% if a.notes %}<span class="text-gray-400 text-sm block mt-1">{{ a.notes }}</span>{% endif %}
      </div>
      <div class="flex gap-2">
        {% if a.status != 'Completed' %}
        <form method="post" action="/appointments/{{ a.id }}/complete" class="inline">
          <button type="submit" class="text-green-600 text-sm hover:underline">Mark Completed</button>
        </form>
        {% endif %}
        <a href="/appointments/{{ a.id }}/edit" class="text-indigo-600 text-sm hover:underline">Edit</a>
        <form method="post" action="/appointments/{{ a.id }}/delete" class="inline">
          <button type="submit" class="text-red-600 text-sm hover:underline">Delete</button>
        </form>
      </div>
    </li>
    {% endfor %}
  </ul>
  {% else %}
  <p class="text-gray-500">No appointments yet. <a href="/appointments/new" class="text-indigo-600 hover:underline">Create one</a>.</p>
  {% endif %}
</div>
{% endblock %}
