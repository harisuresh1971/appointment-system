{% extends "base.html" %}
{% block title %}{{ "Edit Customer" if customer else "New Customer" }}{% endblock %}
{% block content %}
<h1 class="text-2xl font-semibold text-gray-800 mb-6">{{ "Edit Customer" if customer else "New Customer" }}</h1>
<div class="card">
  {% if request.query_params.get("error") == "missing" %}
  <p class="text-red-600 text-sm mb-4">Please fill in name and phone.</p>
  {% endif %}
  {% if request.query_params.get("error") == "duplicate_phone" %}
  <p class="text-red-600 text-sm mb-4">A customer with this phone number already exists.</p>
  {% endif %}
  {% if customer %}
  <form method="post" action="/customers/{{ customer.id }}/edit" class="space-y-4">
  {% else %}
  <form method="post" action="/customers/new" class="space-y-4">
  {% endif %}
    <div>
      <label for="name" class="block text-sm font-medium text-gray-700 mb-1">Name</label>
      <input id="name" name="name" type="text" required class="input-field" value="{{ customer.name if customer else '' }}" />
    </div>
    <div>
      <label for="phone" class="block text-sm font-medium text-gray-700 mb-1">Phone (unique)</label>
      <input id="phone" name="phone" type="text" required class="input-field" value="{{ customer.phone if customer else '' }}" />
    </div>
    <button type="submit" class="btn-primary">Save</button>
    <a href="/customers" class="ml-4 text-gray-600 hover:text-indigo-600">Cancel</a>
  </form>
</div>
{% endblock %}
